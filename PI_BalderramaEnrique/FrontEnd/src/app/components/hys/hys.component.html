<div class="row">
	<h1>Hard & Soft skills</h1>
	<div class="col-lg-2">
		<button type="button" class="btn btn-dark" data-bs-toggle="modal" data-bs-target="#addSkillModal" (click)="onOpenModal('add')" *ngIf="isLogged">
			<a class="nav-link" style="color: aliceblue">
				Agregar Skill<span class="sr-only"></span></a>
		</button>
	</div>

	<div class="text-center col-sm-4 col-md-4 col-lg-4 circulo" *ngFor="let skill of skill">
		<circle-progress
            [percent]="(skill.porcentaje)"
	        [radius]="100"
		    [showUnits]="false"
		    [imageSrc]="''"
			[title]="(skill.nombre)"
			[showTitle]="true"
			[titleColor]="'#212F3C'"
		    [showImage]="false"
		    [imageHeight]="100"
		    [imageWidth]="100"
		    [showSubtitle]="false"
	        [outerStrokeWidth]="16"
	        [innerStrokeWidth]="8"
	        [outerStrokeColor]="'blue'"
	        [innerStrokeColor]="'#C7E596'"
	        [animation]="true"
	        [animationDuration]="600"
        ></circle-progress> 
		<div>
			<td *ngIf="isLogged">
				<button class="btn btn-light" data-bs-toggle="modal" data-bs-target="#editSkillModal" (click)="onOpenModal('edit',skill)">
					<i class="bi bi-pencil-fill"></i></button>
			</td>
			<td *ngIf="isLogged">
				<button class="btn btn-danger" (click)="delete(skill.id)">
					<i class="bi bi-trash-fill"></i></button>
			</td>
		</div>
		
		
	</div> 
	
	<!-- Modal añadir Skill-->
	<div class="modal fade" id="addSkillModal" tabindex="-1" role="dialog" aria-labelledby="addSkillModalLabel"
		aria-hidden="true">

		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="addSkillModalLabel"> Añadir Skill</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<form #addForm="ngForm" (ngSubmit)="onAddSkill(addForm)">
						<div class="form-group">
							<label for="nombre" class="col-form-label">Nombre de la Skill</label>
							<input type="text" ngModel name="nombre" class="form-control" id="nombre"
								placeholder="Nombre de la Skill" required />
						</div>
						<div class="form-group">
							<label for="porcentaje" class="col-form-label">Porcentaje</label>
							<input type="text" ngModel name="porcentaje" class="form-control"
								id="porcentaje" placeholder="Porcentaje" required />

						</div>
						<div class="modal-footer">
							<button type="button" id="add-skill-form" class="btn btn-secondary"
								data-bs-dismiss="modal">
								Close
							</button>
							<button [disabled]="addForm.invalid" type="submit" class="btn btn-primary">
								Añadir Skill
							</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
	<!-- Modal editar Skill-->
	<div class="modal fade" id="editSkillModal" tabindex="-1" role="dialog" aria-labelledby="editSkillModalLabel"
		aria-hidden="true">

		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="updateSkillModalLabel"> Editar Skill {{editSkill?.nombre}}</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<form #editForm="ngForm">
						<div class="form-group">
							<label for="nombre" class="col-form-label">Nombre de la Skill</label>
							<input type="text" ngModel="{{editSkill?.nombre}}" name="nombre" class="form-control" id="nombre"
								placeholder="Nombre de la Skill" required />
						</div>
						<input type="hidden" ngModel="{{editSkill?.id}}" name="id" class="form-control" id="id" placeholder="">
						<div class="form-group">
							<label for="porcentaje">Porcentaje</label>
							<input type="text" ngModel="{{editSkill?.porcentaje}}" name="porcentaje" class="form-control"
								id="porcentaje" placeholder="Porcentaje" required />
						</div>
						<div class="modal-footer">
							<button type="button" id="" class="btn btn-secondary"
								data-bs-dismiss="modal">
								Cerrar
							</button>
							<button (click)="onUpdateSkill(editForm.value)" data-bs-dismiss="modal" class="btn btn-primary">
								Guardar cambios
							</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
</div>
